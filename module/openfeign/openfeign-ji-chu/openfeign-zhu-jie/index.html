<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>【OpenFeign】 注解 | 蝶梦庄生</title><meta name="keywords" content="OpenFeign"><meta name="author" content="Bill Cipher"><meta name="copyright" content="Bill Cipher"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="【OpenFeign】 注解">
<meta property="og:type" content="article">
<meta property="og:title" content="【OpenFeign】 注解">
<meta property="og:url" content="https://yu627482453.github.io/module/openfeign/openfeign-ji-chu/openfeign-zhu-jie/index.html">
<meta property="og:site_name" content="蝶梦庄生">
<meta property="og:description" content="【OpenFeign】 注解">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://api.yimian.xyz/img?type=moe">
<meta property="article:published_time" content="2023-01-02T10:54:00.000Z">
<meta property="article:modified_time" content="2023-01-02T10:54:00.000Z">
<meta property="article:author" content="Bill Cipher">
<meta property="article:tag" content="行动阶段&#x2F;完成">
<meta property="article:tag" content="主题场景&#x2F;组件">
<meta property="article:tag" content="笔记空间&#x2F;KnowladgeSpace&#x2F;ProgramSpace&#x2F;ModuleSpace">
<meta property="article:tag" content="细化主题&#x2F;Module&#x2F;OpenFeign&#x2F;基础">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://api.yimian.xyz/img?type=moe"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://yu627482453.github.io/module/openfeign/openfeign-ji-chu/openfeign-zhu-jie/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Bill Cipher","link":"链接: ","source":"来源: 蝶梦庄生","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '【OpenFeign】 注解',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-01-02 18:54:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">575</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">125</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://api.yimian.xyz/img?type=moe')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">蝶梦庄生</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">【OpenFeign】 注解</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-01-02T10:54:00.000Z" title="发表于 2023-01-02 18:54:00">2023-01-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-01-02T10:54:00.000Z" title="更新于 2023-01-02 18:54:00">2023-01-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/OpenFeign/">OpenFeign</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="【OpenFeign】 注解"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="【OpenFeign】-注解"><a href="#【OpenFeign】-注解" class="headerlink" title="【OpenFeign】 注解"></a>【OpenFeign】 注解</h1><h2 id="Metadata"><a href="#Metadata" class="headerlink" title="Metadata"></a>Metadata</h2><pre><code class="line-numbers language-yml">title: 【OpenFeign】 注解
date: 2023-01-02 18:54
tags:
  - 行动阶段/完成
  - 主题场景/组件
  - 笔记空间/KnowladgeSpace/ProgramSpace/ModuleSpace
  - 细化主题/Module/OpenFeign/基础
categories:
  - OpenFeign
keywords:
  - OpenFeign
description: 【OpenFeign】 注解
</code></pre>
<h2 id="原生注解"><a href="#原生注解" class="headerlink" title="原生注解"></a>原生注解</h2><p>Feign 注解定义了接口和底层客户端应之间该如何工作的关系。Feign 的默认定义了以下注解：</p>
<table>
<thead>
<tr>
<th>注解</th>
<th>作用位置</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td>@RequestLine</td>
<td>方法</td>
<td>为请求定义 HttpMethod 和 UriTemplate。 花括号 {expression} 中的值使用其相应的带 @Param 注解的参数解析。</td>
</tr>
<tr>
<td>@Param</td>
<td>参数</td>
<td>定义一个模板变量，其值将用于解析相应的表达式模板，通过作为注解值提供的名称。如果缺少值，它将尝试从字节码方法参数名称中获取名称（如果代码是用 - parameters 标志编译的）。</td>
</tr>
<tr>
<td>@Headers</td>
<td>方法、类型</td>
<td>定义一个 HeaderTemplate。使用带 @Param 注释的值来解析相应的 Expressions. 在 Type 上使用时，模板将应用于每个请求。</td>
</tr>
<tr>
<td>@QueryMap</td>
<td>参数</td>
<td>范围 定义一个 Map 名称 - 值对或 POJO，以扩展为查询字符串。</td>
</tr>
<tr>
<td>@HeaderMap</td>
<td>参数</td>
<td>范围 定义一个 Map 名称 - 值对，扩展为 Http Headers</td>
</tr>
<tr>
<td>@Body</td>
<td>方法</td>
<td>定义 Template，类似于 UriTemplateand、 HeaderTemplate，它使用带 @Param 注释的值来解析相应的 Expressions.</td>
</tr>
</tbody></table>
<h3 id="RequestLine"><a href="#RequestLine" class="headerlink" title="@RequestLine"></a>@RequestLine</h3><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p><code>RequestLine</code>是请求行的意思，我们知道在 HTTP 中，请求行一般由以下几部分构成。</p>
<p><img src="https://img-blog.csdnimg.cn/81ccefca202448b5bbfac155b9081db6.png"></p>
<p><code>@RequestLine</code>注解只能标注在方法上，为请求定义 HttpMethod（请求方式 GET、POST 等）和 UriTemplate（访问路径），然后可以将<code>@Param</code>注解中表示的参数，解析到表达式 { } 对应的位置上。</p>
<p><code>@RequestLine</code>注解有以下几个配置项，一般我们只需要配置 value 值就可以了。</p>
<pre><code class="line-numbers language-java">@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
public @interface RequestLine {
    // 请求行的值
    String value();
    // 斜杠转义，默认true
    boolean decodeSlash() default true;
    //  URL参数中编码方式，默认使用 &amp;aa=aabb&amp;bb=bb，不需要改
    CollectionFormat collectionFormat() default CollectionFormat.EXPLODED;
}
</code></pre>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>接下来我们看下如何使用<code>@RequestLine</code>注解进行传参访问。</p>
<p>首先将接口改为需要一个 name 参数：</p>
<pre><code class="line-numbers language-java">@GetMapping("/test")
    @ApiOperation(value = "测试接口")
    @ApiOperationSupport(author = "xiaoymin@foxmail.com")
    public String test(String name) {
        return name;
    }
</code></pre>
<p>Feign 接口中，定义好请求行，使用<code>@Param</code>注解表示将请求参数赋值给表达式 {name}。</p>
<pre><code class="line-numbers language-java">public interface TestFeignClient {

    @RequestLine("GET /app1/test?name={name}")
    String test(@Param("name") String name);
}
</code></pre>
<p>然后创建客户端并远程访问：</p>
<pre><code class="line-numbers language-java">public static void main(String[] args) {
        // 1. 生成Feign 客户端
        TestFeignClient feignClient = Feign.builder()
                .logger(new Logger.ErrorLogger()).logLevel(Logger.Level.FULL) // 打印所有日志
                .retryer(Retryer.NEVER_RETRY) // 关闭重启
                .target(TestFeignClient.class, "http://127.0.0.1:9001"); // 接口及请求地址
        // 2. 打印结果
        String test = feignClient.test("张三");
        System.out.println(test);
    }
</code></pre>
<p>启动该工程，并执行 Feign 请求，可以通过日志，看到当前请求的整个过程。</p>
<h3 id="Param"><a href="#Param" class="headerlink" title="@Param"></a>@Param</h3><h4 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h4><p><code>@Param</code> 只能做用于方法参数上，它的主要作用是，通过变量名，绑定一个参数值，然后可以将参数填充到模板表达式中。</p>
<pre><code class="line-numbers language-java">@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.PARAMETER, ElementType.FIELD, ElementType.METHOD})
public @interface Param {
    // Key,对应模板表达式中的变量
    String value() default "";
    // 填充方式，默认直接使用ToString方法，
    Class&lt;? extends Param.Expander&gt; expander() default Param.ToStringExpander.class;
    // 是否转义，默认false
    /** @deprecated */
    boolean encoded() default false;
    // 内部类填充器  使用ToString方法填充
    public static final class ToStringExpander implements Param.Expander {
        public ToStringExpander() {
        }

        public String expand(Object value) {
            return value.toString();
        }
    }

    public interface Expander {
        String expand(Object var1);
    }
}
</code></pre>
<p>在上面的案例中，会将 name 参数，填充到 {name} 表达式中。</p>
<pre><code class="line-numbers language-java">@RequestLine("GET /app1/test?name={name}")
    String test(@Param("name") String name);
</code></pre>
<h3 id="Headers"><a href="#Headers" class="headerlink" title="@Headers"></a>@Headers</h3><h4 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h4><p><code>@Headers</code>可作用于方法或者类上，用于添加请求头。</p>
<p>它的属性很简单，是一个字符串数组。</p>
<pre><code class="line-numbers language-java">@Target({ElementType.METHOD, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
public @interface Headers {
    // 请求头
    String[] value();
}
</code></pre>
<h4 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h4><p>注意添加的时候，消息头键值对使用冒号：分隔。</p>
<pre><code class="line-numbers language-java">@Headers({"Accept:*/*", "Accept-Language:zh-cn"})
</code></pre>
<p>可以看到，注解上标识的请求头被添加到了请求中。</p>
<p><img src="https://img-blog.csdnimg.cn/d2fa4e94d4e642b7bf773936b52acdfa.png"></p>
<h3 id="QueryMap"><a href="#QueryMap" class="headerlink" title="@QueryMap"></a>@QueryMap</h3><h4 id="概述-3"><a href="#概述-3" class="headerlink" title="概述"></a>概述</h4><p><code>@QueryMap</code>注解只可作用于方法参数上，表示将多个参数拼接在 URL 后面访问。</p>
<p>其只有一个属性，表示是否转义，默认 false。</p>
<pre><code class="line-numbers language-java">@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.PARAMETER})
public @interface QueryMap {
    boolean encoded() default false;
}
</code></pre>
<h4 id="案例-2"><a href="#案例-2" class="headerlink" title="案例"></a>案例</h4><p>如果某个请求接口需要多个参数，这个时候就可以使用<code>@QueryMap</code>注解传递，注意这个会后参数必须是 Map 类型的。</p>
<p>比如我们可以通过以下方式传递：</p>
<pre><code class="line-numbers language-java">@RequestLine("GET /app1/test")
    @Headers({"Accept:*/*", "Accept-Language:zh-cn"})
    String testQueryMap(@QueryMap Map&lt;String, String&gt; map);
</code></pre>
<p>可以看到在请求时，将 Map 中的键值对拼接到了 URL 后面。</p>
<p><img src="https://img-blog.csdnimg.cn/57f8339dcf2a4d54aeb4063b65f6e161.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAcXFfNDM0Mzc4NzQ=,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<h3 id="HeaderMap"><a href="#HeaderMap" class="headerlink" title="@HeaderMap"></a>@HeaderMap</h3><h4 id="概述-4"><a href="#概述-4" class="headerlink" title="概述"></a>概述</h4><p><code>@HeaderMap</code>注解只能做用于方法参数上，和<code>@QueryMap</code>差不多，是将 Map 中的键值对，添加到请求头中。</p>
<p>该注解没有配置项：</p>
<pre><code class="line-numbers language-java">@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.PARAMETER})
public @interface HeaderMap {
}
</code></pre>
<h4 id="案例-3"><a href="#案例-3" class="headerlink" title="案例"></a>案例</h4><pre><code class="line-numbers language-java">@RequestLine("GET /app1/test")
    String testQueryMap(@HeaderMap Map&lt;String, String&gt; map);
</code></pre>
<h3 id="Body"><a href="#Body" class="headerlink" title="@Body"></a>@Body</h3><h4 id="概述-5"><a href="#概述-5" class="headerlink" title="概述"></a>概述</h4><p><code>@Body</code> 做用于方法上，会使用请求体来传递参数。可以传递字符串、Json 数据，在传递 Bean 对象时，会调用其<code>toString</code>方法再进行传递。</p>
<p>该注解只有一个属性值，可以写表达式，通过<code>@Param</code>传值。</p>
<pre><code class="line-numbers language-java">@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
public @interface Body {
    String value();
}
</code></pre>
<h4 id="案例-4"><a href="#案例-4" class="headerlink" title="案例"></a>案例</h4><p>通过请求体传递一个实体类对象。</p>
<pre><code class="line-numbers language-java">@RequestLine("POST /app1/post")
    @Body("{user}")
    String post(@Param("user") User user);
</code></pre>
<p>可以看到在发送请求时，实际传递的是实体类的 toString 字符串，如果在接口提供方用对象是接受不到的。。。具体怎么回事，后续会介绍</p>
<p><img src="https://img-blog.csdnimg.cn/cf6a0c50fd2048999af07c1c6aa06eb7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAcXFfNDM0Mzc4NzQ=,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<h2 id="EnableFeignClients"><a href="#EnableFeignClients" class="headerlink" title="@EnableFeignClients"></a>@EnableFeignClients</h2><p>在 Cloud 中使用<code>@EnableFeignClients</code>启用 <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Feign&amp;spm=1001.2101.3001.7020">Feign</a> 客户端，接下来分析下这个注解的基本原理。</p>
<p><code>@EnableFeignClients</code>注解会扫描包路径下的<code>@FeignClient</code>注解定义的接口，并注册到 IOC 容器中。</p>
<p>配置属性主要是配置扫描路径：</p>
<pre><code class="line-numbers language-java">@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.TYPE})
@Documented
@Import({FeignClientsRegistrar.class})
public @interface EnableFeignClients {
    // 配置扫描@FeignClient的路径，默认是当前标识了该注解类下的路径，和@ComponentScans一样
    String[] value() default {};
    // 扫描路径，多个
    String[] basePackages() default {};
    // 指定扫描某个类所在包下的所有类
    Class&lt;?&gt;[] basePackageClasses() default {};
    // 指定客户端配置配
    Class&lt;?&gt;[] defaultConfiguration() default {};
    // 直接指定扫描客户端的类，配置了就不会扫描
    Class&lt;?&gt;[] clients() default {};
}
</code></pre>
<p>在<code>@EnableFeignClients</code>注解中，使用了<code>@Import</code>注解导入了<code>FeignClientsRegistrar</code>，学过 Spring 的应该知道<code>@Configuration</code>类上使用<code>@Import</code>，可以注入 Bean 对象。</p>
<p><code>FeignClientsRegistrar</code>实现了以下几个接口：</p>
<ul>
<li>ImportBeanDefinitionRegistrar：支持使用<code>@Import</code>注解注册 BeanDefinition</li>
<li>ResourceLoaderAware：读取文件</li>
<li>EnvironmentAware：获取环境及配置属性</li>
</ul>
<p>启动项目后，进行<code>BeanDefinition</code>注册时，就会进入到<code>registerBeanDefinitions</code>方法，该方法会注册默认配置和注册 Feign 客户端。</p>
<pre><code class="line-numbers language-java">public void registerBeanDefinitions(AnnotationMetadata metadata, BeanDefinitionRegistry registry) {
        this.registerDefaultConfiguration(metadata, registry);
        this.registerFeignClients(metadata, registry);
    }
</code></pre>
<p><code>registerDefaultConfiguration</code>会进行注册客户端配置类的<code>BeanDefinition</code>：</p>
<pre><code class="line-numbers language-java">// 参数为EnableFeignClients注解配置的类的信息、BeanDefinition注册器
    private void registerDefaultConfiguration(AnnotationMetadata metadata, BeanDefinitionRegistry registry) {
        // 1. 获取EnableFeignClients注解上的配置属性
        Map&lt;String, Object&gt; defaultAttrs = metadata.getAnnotationAttributes(EnableFeignClients.class.getName(), true);
        if (defaultAttrs != null &amp;&amp; defaultAttrs.containsKey("defaultConfiguration")) {
            // 取个名字=》default.account.AccountApp
            String name;
            if (metadata.hasEnclosingClass()) {
                name = "default." + metadata.getEnclosingClassName();
            } else {
                name = "default." + metadata.getClassName();
            }
            // 2. 注册客户端配置
            this.registerClientConfiguration(registry, name, defaultAttrs.get("defaultConfiguration"));
        }

    }
</code></pre>
<p>接着进入到<code>registerClientConfiguration</code>，注册客户端配置，会在注册器中添加一个名字为<code>default.account.AccountApp.FeignClientSpecification</code>，类型为<code>FeignClientSpecification</code>的<code>BeanDefinition</code>。</p>
<pre><code class="line-numbers language-java">private void registerClientConfiguration(BeanDefinitionRegistry registry, Object name, Object configuration) {
        // 创建一个 BeanDefinition构建者，使用FeignClientSpecification（这里存放了客户端配置名称和配置类）
        BeanDefinitionBuilder builder = BeanDefinitionBuilder.genericBeanDefinition(FeignClientSpecification.class);
        // 添加FeignClientSpecification 构造函数的参数
        // name =&gt; default.account.AccountApp
        // configuration=&gt; 注解上的配置类，这里没有
        builder.addConstructorArgValue(name);
        builder.addConstructorArgValue(configuration);
        // 注册，名称为=》default.account.AccountApp.FeignClientSpecification
        // 类型为=》FeignClientSpecification
        registry.registerBeanDefinition(name + "." + FeignClientSpecification.class.getSimpleName(), builder.getBeanDefinition());
    }
</code></pre>
<p>接着注册 Feign 客户端，会调用扫描器，扫描类路径下的<code>@FeignClient</code>标记的类，然后读取配置信息，将该类的配置项、类信息都注册到注册器中。</p>
<pre><code class="line-numbers language-java">public void registerFeignClients(AnnotationMetadata metadata, BeanDefinitionRegistry registry) {
        // BeanDefinition 不重复集合
        LinkedHashSet&lt;BeanDefinition&gt; candidateComponents = new LinkedHashSet();
        // EnableFeignClients 注解配置信息
        Map&lt;String, Object&gt; attrs = metadata.getAnnotationAttributes(EnableFeignClients.class.getName());
        new AnnotationTypeFilter(FeignClient.class);
        Class&lt;?&gt;[] clients = attrs == null ? null : (Class[])((Class[])attrs.get("clients"));
        // 查看是否配置了clients 属性，看来这个属性配置了以后，就不会进行包扫描
        if (clients != null &amp;&amp; clients.length != 0) {
            Class[] var13 = clients;
            int var15 = clients.length;

            for(int var17 = 0; var17 &lt; var15; ++var17) {
                Class&lt;?&gt; clazz = var13[var17];
                candidateComponents.add(new AnnotatedGenericBeanDefinition(clazz));
            }
        } else {
            // 创建一个ClassPath扫描器
            ClassPathScanningCandidateComponentProvider scanner = this.getScanner();
            // 设置ResourceLoader
            scanner.setResourceLoader(this.resourceLoader);
            // 设置需要扫描的类，也就是配置了FeignClient 注解的类
            scanner.addIncludeFilter(new AnnotationTypeFilter(FeignClient.class));
            // 获取配置上的 这里没配置，就是扫描当前项目包下面的了
            Set&lt;String&gt; basePackages = this.getBasePackages(metadata);
            Iterator var9 = basePackages.iterator();
            // 扫描到Feign 接口类，放入集合中
            while(var9.hasNext()) {
                String basePackage = (String)var9.next();
                candidateComponents.addAll(scanner.findCandidateComponents(basePackage));
            }
        }

        Iterator var14 = candidateComponents.iterator();

        while(var14.hasNext()) {
            // 循环扫描到的BeanDefinition 
            BeanDefinition candidateComponent = (BeanDefinition)var14.next();
            if (candidateComponent instanceof AnnotatedBeanDefinition) {
                AnnotatedBeanDefinition beanDefinition = (AnnotatedBeanDefinition)candidateComponent;
                // FeignClient注解上的元信息
                AnnotationMetadata annotationMetadata = beanDefinition.getMetadata();
                Assert.isTrue(annotationMetadata.isInterface(), "@FeignClient can only be specified on an interface");
                // FeignClient注解配置的属性
                Map&lt;String, Object&gt; attributes = annotationMetadata.getAnnotationAttributes(FeignClient.class.getCanonicalName());
                // BeanDefinition 名称=》order-service
                String name = this.getClientName(attributes);
                // 注册客户端配置=》configuration属性
                this.registerClientConfiguration(registry, name, attributes.get("configuration"));
                // 注册客户端
                this.registerFeignClient(registry, annotationMetadata, attributes);
            }
        }

    }
</code></pre>
<p>注册了客户端的配置后，就会注册客户端，调用的是<code>registerFeignClient</code>方法：</p>
<pre><code class="line-numbers language-java">private void registerFeignClient(BeanDefinitionRegistry registry, AnnotationMetadata annotationMetadata, Map&lt;String, Object&gt; attributes) {
        // account.OrderFeign
        String className = annotationMetadata.getClassName();
        // 创建FeignClientFactoryBean 类型的BeanDefinition 
        BeanDefinitionBuilder definition = BeanDefinitionBuilder.genericBeanDefinition(FeignClientFactoryBean.class);
        this.validate(attributes);
        // 将这些FeignClient 注解上的配置信息都添加到definition中，
        definition.addPropertyValue("url", this.getUrl(attributes));
       // 省略....
        beanDefinition.setPrimary(primary);
        String qualifier = this.getQualifier(attributes);
        if (StringUtils.hasText(qualifier)) {
            alias = qualifier;
        }
        // 添加到注册器中
        BeanDefinitionHolder holder = new BeanDefinitionHolder(beanDefinition, className, new String[]{alias});
        BeanDefinitionReaderUtils.registerBeanDefinition(holder, registry);
    }
</code></pre>
<p>可以看到，最终每个 Feign 接口注册到了 注册器中，名称为<code>包名+接口名</code>，Feign 接口实际生成的 Bean 对象为<code>FeignClientFactoryBean</code>，这是一个<code>FactoryBean</code>，由它最终生成的代理对象后续会讲解）。</p>
<p><img src="https://img-blog.csdnimg.cn/92933eddbfd044af9ce90d931512f4fe.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAcXFfNDM0Mzc4NzQ=,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p><img src="https://img-blog.csdnimg.cn/06244d488c9f44e4b8ae1fb82a56e42d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAcXFfNDM0Mzc4NzQ=,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<h2 id="FeignClient"><a href="#FeignClient" class="headerlink" title="@FeignClient"></a>@FeignClient</h2><p>在上篇文档中<code>@EnableFeignClients</code>注解，扫描<code>@FeignClient</code>注解表示的接口，并将加载到容器中，接下来分析下<code>@FeignClient</code>注解配置项及加载流程。</p>
<p>标记接口为 <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Feign&amp;spm=1001.2101.3001.7020">Feign</a> 客户端，Feign 启动会扫描当前接口及注解属性，加载到容器中，执行时，通过 IOC 中当前注解对应的<code>FactoryBean</code>对象，创建动态代理对象，然后去执行请求流程</p>
<pre><code class="line-numbers language-java">@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
public @interface FeignClient {
    // 指定FeignClient的名称，如果项目使用了Ribbon，name属性会作为微服务的名称，用于服务发现
    @AliasFor("name")
    String value() default "";
    // 
    /** @deprecated */
    @Deprecated
    String serviceId() default "";
    // 每个客户端，对应不用的上下文，这里就是这个上下文的ID，
    // 当name属性一样时，可以自定义这个ID，来解决冲突问题
    String contextId() default "";
    
    @AliasFor("value")
    String name() default "";
    
    String qualifier() default "";
    // 指定@FeignClient调用的IP地址，一般都是服务发现，所以不需要配置
    String url() default "";
    // 是否解码404，404时，会返回NULL对象，不建议配置
    boolean decode404() default false;
    // Feign配置类，可以自定义Feign的Encoder、Decoder、LogLevel、Contract
    Class&lt;?&gt;[] configuration() default {};
    // 定义容错的处理类，当调用远程接口失败或超时时，
    // 会调用对应接口的容错逻辑，fallback指定的类必须实现@FeignClient标记的接口
    Class&lt;?&gt; fallback() default void.class;
    // 工厂类，用于生成fallback类示例，通过这个属性我们可以实现每个接口通用的容错逻辑，减少重复的代码
    Class&lt;?&gt; fallbackFactory() default void.class;
    // 定义当前FeignClient的统一前缀
    String path() default "";
    // 是否是primary 
    boolean primary() default true;
}
</code></pre>
<p>还是一样分析<code>FeignClientsRegistrar</code>类。</p>
<h3 id="1-获取客户端名称"><a href="#1-获取客户端名称" class="headerlink" title="1. 获取客户端名称"></a>1. 获取客户端名称</h3><p>之前分析过，扫描之后，就会在<code>registerFeignClients</code>方法注册客户端，首先会获取客户端名称：  </p>
<p><img src="https://img-blog.csdnimg.cn/85d7831ac7e7459dabd89024b1a856c4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAcXFfNDM0Mzc4NzQ=,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p><code>getClientName</code>方法传入的参数，就是<code>@FeignClient</code>注解配置属性：  </p>
<p><img src="https://img-blog.csdnimg.cn/f470aa4bbd0d459abd439c71bafdfac5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAcXFfNDM0Mzc4NzQ=,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p><code>getClientName</code>处理逻辑如下，也就是名称会从配置项中选择，优先级为 contextId=》value=》name=》serviceId，没有则会报错。</p>
<pre><code class="line-numbers language-java">// 参数为
    private String getClientName(Map&lt;String, Object&gt; client) {
        if (client == null) {
            return null;
        } else {
            // 先设置名称为 contextId配置项，这里没有为“”
            String value = (String)client.get("contextId");
            // 如果为空查看value配置项
            if (!StringUtils.hasText(value)) {
                value = (String)client.get("value");
            }
             // 如果为空查看name配置项
            if (!StringUtils.hasText(value)) {
                value = (String)client.get("name");
            }
             // 如果为空查看serviceId配置项
            if (!StringUtils.hasText(value)) {
                value = (String)client.get("serviceId");
            }
            // 如果有，则直接返回，没有报错
            if (StringUtils.hasText(value)) {
                return value;
            } else {
                throw new IllegalStateException("Either 'name' or 'value' must be provided in @" + FeignClient.class.getSimpleName());
            }
        }
    }
</code></pre>
<h3 id="2-获取-configuration"><a href="#2-获取-configuration" class="headerlink" title="2. 获取 configuration"></a>2. 获取 configuration</h3><p>接着就是将<code>configuration</code>中的配置类加载到<code>BeanDefinitionRegistry</code>中了。</p>
<p><img src="https://img-blog.csdnimg.cn/e6bc53ddc57547ba9fbad9f97b66f73d.png"></p>
<h3 id="3-注册客户端"><a href="#3-注册客户端" class="headerlink" title="3. 注册客户端"></a>3. 注册客户端</h3><p>接着就是<code>registerFeignClient</code> 注册客户端了，首先会将注解属性添加到<code>definition</code>中，这里 url、path 没有配置，所以都为空，然后注意<code>contextId</code>，没有配置时，默认使用 name 属性，这也就是为啥多个同名的<code>@FeignClient</code>，没有指定<code>contextId</code>会报错的原因了。  </p>
<p><img src="https://img-blog.csdnimg.cn/8764873036074274b28709a63eedfb51.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAcXFfNDM0Mzc4NzQ=,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
<p>接着还会设置<code>alias</code>，<code>factoryBeanObjectType</code>,<code>primary</code>属性：</p>
<pre><code class="line-numbers language-java">// 别名 ：order-serviceFeignClient
        String alias = contextId + "FeignClient";
        // factoryBeanObjectType=》account.OrderFeign
        // 告诉factoryBean，要生成对象的类
        beanDefinition.setAttribute("factoryBeanObjectType", className);
        // 是否primary ，也就是@Primary 注解，多个相同Bean时，优先使用这一个
        boolean primary = (Boolean)attributes.get("primary");
        beanDefinition.setPrimary(primary);
</code></pre>
<p>最后就到了上篇文档分析的最后一步了。  </p>
<p><img src="https://img-blog.csdnimg.cn/2b077302761a4c10a4c63b09b15ec2fd.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAcXFfNDM0Mzc4NzQ=,size_20,color_FFFFFF,t_70,g_se,x_16"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/yu627482453">Bill Cipher</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://yu627482453.github.io/module/openfeign/openfeign-ji-chu/openfeign-zhu-jie/">https://yu627482453.github.io/module/openfeign/openfeign-ji-chu/openfeign-zhu-jie/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://yu627482453.github.io" target="_blank">蝶梦庄生</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%A1%8C%E5%8A%A8%E9%98%B6%E6%AE%B5-%E5%AE%8C%E6%88%90/">行动阶段/完成</a><a class="post-meta__tags" href="/tags/%E4%B8%BB%E9%A2%98%E5%9C%BA%E6%99%AF-%E7%BB%84%E4%BB%B6/">主题场景/组件</a><a class="post-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0%E7%A9%BA%E9%97%B4-KnowladgeSpace-ProgramSpace-ModuleSpace/">笔记空间/KnowladgeSpace/ProgramSpace/ModuleSpace</a><a class="post-meta__tags" href="/tags/%E7%BB%86%E5%8C%96%E4%B8%BB%E9%A2%98-Module-OpenFeign-%E5%9F%BA%E7%A1%80/">细化主题/Module/OpenFeign/基础</a></div><div class="post_share"><div class="social-share" data-image="https://api.yimian.xyz/img?type=moe" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/reward/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/reward/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/reward/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/reward/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/module/openfeign/openfeign-gong-neng/openfeign-dong-tai-dai-li/"><img class="prev-cover" src="https://api.yimian.xyz/img?type=moe" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">【OpenFeign】 动态代理</div></div></a></div><div class="next-post pull-right"><a href="/module/openfeign/openfeign-ji-chu/openfeign-gong-neng-ji-xiang-guan-lei/"><img class="next-cover" src="https://api.yimian.xyz/img?type=moe" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">【OpenFeign】 功能及相关类</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/module/openfeign/openfeign-ji-chu/openfeign-gong-neng-ji-xiang-guan-lei/" title="【OpenFeign】 功能及相关类"><img class="cover" src="https://api.yimian.xyz/img?type=moe" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-02</div><div class="title">【OpenFeign】 功能及相关类</div></div></a></div><div><a href="/module/openfeign/openfeign-ji-chu/openfeign-jie-kou-ji-cheng-te-xing/" title="【OpenFeign】 接口继承特性"><img class="cover" src="https://api.yimian.xyz/img?type=moe" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-02</div><div class="title">【OpenFeign】 接口继承特性</div></div></a></div><div><a href="/module/openfeign/openfeign-ji-chu/openfeign-he-xin-gai-nian/" title="【OpenFeign】 核心概念"><img class="cover" src="https://api.yimian.xyz/img?type=moe" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-02</div><div class="title">【OpenFeign】 核心概念</div></div></a></div><div><a href="/module/openfeign/openfeign-ji-chu/openfeign-tong-yong-ying-yong-pei-zhi/" title="【OpenFeign】 通用 应用配置"><img class="cover" src="https://api.yimian.xyz/img?type=moe" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-02</div><div class="title">【OpenFeign】 通用 应用配置</div></div></a></div><div><a href="/module/elasticsearch/elasticsearch-ji-ben-gai-nian/" title="【ElasticSearch】 基本概念"><img class="cover" src="https://api.yimian.xyz/img?type=moe" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-20</div><div class="title">【ElasticSearch】 基本概念</div></div></a></div><div><a href="/module/eureka/eureka/" title="Eureka"><img class="cover" src="https://api.yimian.xyz/img?type=moe" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-14</div><div class="title">Eureka</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Bill Cipher</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">575</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">125</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yu627482453"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/yu627482453" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/627482453@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E3%80%90OpenFeign%E3%80%91-%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.</span> <span class="toc-text">【OpenFeign】 注解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Metadata"><span class="toc-number">1.1.</span> <span class="toc-text">Metadata</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E7%94%9F%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.2.</span> <span class="toc-text">原生注解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestLine"><span class="toc-number">1.2.1.</span> <span class="toc-text">@RequestLine</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.2.2.</span> <span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Param"><span class="toc-number">1.2.3.</span> <span class="toc-text">@Param</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">概述</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Headers"><span class="toc-number">1.2.4.</span> <span class="toc-text">@Headers</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-2"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-1"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#QueryMap"><span class="toc-number">1.2.5.</span> <span class="toc-text">@QueryMap</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-3"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-2"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HeaderMap"><span class="toc-number">1.2.6.</span> <span class="toc-text">@HeaderMap</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-4"><span class="toc-number">1.2.6.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-3"><span class="toc-number">1.2.6.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Body"><span class="toc-number">1.2.7.</span> <span class="toc-text">@Body</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-5"><span class="toc-number">1.2.7.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-4"><span class="toc-number">1.2.7.2.</span> <span class="toc-text">案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EnableFeignClients"><span class="toc-number">1.3.</span> <span class="toc-text">@EnableFeignClients</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FeignClient"><span class="toc-number">1.4.</span> <span class="toc-text">@FeignClient</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%8E%B7%E5%8F%96%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%90%8D%E7%A7%B0"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. 获取客户端名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96-configuration"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. 获取 configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%B3%A8%E5%86%8C%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. 注册客户端</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/module/flowable/flowable-zhuan-lan/flowable-zhuan-lan/" title="无题"><img src="https://api.yimian.xyz/img?type=moe" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/module/flowable/flowable-zhuan-lan/flowable-zhuan-lan/" title="无题">无题</a><time datetime="2023-07-15T09:45:06.401Z" title="发表于 2023-07-15 17:45:06">2023-07-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/module/consul/part/consul-tong-yong-pei-zhi-shu-xing/" title="无题"><img src="https://api.yimian.xyz/img?type=moe" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/module/consul/part/consul-tong-yong-pei-zhi-shu-xing/" title="无题">无题</a><time datetime="2023-07-15T09:44:38.408Z" title="发表于 2023-07-15 17:44:38">2023-07-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/java/java-duo-xian-cheng-bing-fa/java-duo-xian-cheng-bing-fa-xian-cheng/java-duo-xian-cheng-bing-fa-xian-cheng/" title="【Java 多线程并发】 线程"><img src="https://api.yimian.xyz/img?type=moe" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Java 多线程并发】 线程"/></a><div class="content"><a class="title" href="/java/java-duo-xian-cheng-bing-fa/java-duo-xian-cheng-bing-fa-xian-cheng/java-duo-xian-cheng-bing-fa-xian-cheng/" title="【Java 多线程并发】 线程">【Java 多线程并发】 线程</a><time datetime="2023-07-10T06:15:00.000Z" title="发表于 2023-07-10 14:15:00">2023-07-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/java/java-jvm/java-jvm-nei-cun-guan-li/java-jvm-zhi-jie-nei-cun/" title="【Java JVM】 直接内存"><img src="https://api.yimian.xyz/img?type=moe" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Java JVM】 直接内存"/></a><div class="content"><a class="title" href="/java/java-jvm/java-jvm-nei-cun-guan-li/java-jvm-zhi-jie-nei-cun/" title="【Java JVM】 直接内存">【Java JVM】 直接内存</a><time datetime="2023-07-10T00:00:00.000Z" title="发表于 2023-07-10 08:00:00">2023-07-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/database/redis/redis-chong-dian-gong-neng/redis-pai-xu/" title="【Redis】 排序"><img src="https://api.yimian.xyz/img?type=moe" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Redis】 排序"/></a><div class="content"><a class="title" href="/database/redis/redis-chong-dian-gong-neng/redis-pai-xu/" title="【Redis】 排序">【Redis】 排序</a><time datetime="2023-07-09T06:07:00.000Z" title="发表于 2023-07-09 14:07:00">2023-07-09</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Bill Cipher</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: 'c61a274b6f5aa26a58f6',
      clientSecret: '485a7761d321c8dcc5cae05d7256be9fb196d94a',
      repo: 'yu627482453.github.io',
      owner: 'yu627482453',
      admin: ['yu627482453'],
      id: '2ac0030aae1f5e692cfbe854a4393c78',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !true) {
  if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>